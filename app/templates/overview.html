<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Account</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='stylesheets/overview.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='stylesheets/navbar.css') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;800&display=swap"
      rel="stylesheet"
    />

  </head>
  <body>
    <aside class="sidebar">
      <!-- <a class="nav-item nav-link" href="{{ url_for('logout') }}">Log out</a> -->
      <div class="logo">
        <p class="title">TradingView</p>
        <p class="title-bottom">Webhook</p>
      </div>
      <nav class="navbar">
        <a href="#" class="toggle-button">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </a>
        <div class="navbar-links">
          <ul>
            <div>
              <li class="sidebar-item sidebar-item--active">
                <svg
                  width="1.3em"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M6 8H2C0.9 8 0 7.1 0 6V2C0 0.9 0.9 0 2 0H6C7.1 0 8 0.9 8 2V6C8 7.1 7.1 8 6 8ZM6 18H2C0.9 18 0 17.1 0 16V12C0 10.9 0.9 10 2 10H6C7.1 10 8 10.9 8 12V16C8 17.1 7.1 18 6 18ZM10 2V6C10 7.1 10.9 8 12 8H16C17.1 8 18 7.1 18 6V2C18 0.9 17.1 0 16 0H12C10.9 0 10 0.9 10 2ZM16 18H12C10.9 18 10 17.1 10 16V12C10 10.9 10.9 10 12 10H16C17.1 10 18 10.9 18 12V16C18 17.1 17.1 18 16 18Z"
                    fill="currentColor"
                  ></path>
                </svg>
                <a href="{{ url_for('home') }}">Dashboard</a>
              </li>
            </div>
            <div>

              <li class="sidebar-item">
                <svg
                width="1.3em"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                >
                <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M20 10C20 4.48 15.52 0 10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10ZM13 4.5L16.15 7.65C16.35 7.85 16.35 8.16 16.15 8.36L13 11.5V9H9V7H13V4.5ZM7 15.5L3.85 12.35C3.65 12.15 3.65 11.84 3.85 11.64L7 8.5V11H11V13H7V15.5Z"
                fill="currentColor"
                ></path>
              </svg>
              <a href="{{ url_for('user_log') }}">Trade history</a>
            </div>
            </li>
            <div>
              <li class="sidebar-item">
                <svg 
                  version="1.0" 
                  xmlns="http://www.w3.org/2000/svg"
                  width="1.3em" 
                  height="1.3em" 
                  viewBox="0 0 32.000000 32.000000"
                  preserveAspectRatio="xMidYMid meet">
    
                  <g transform="translate(0.000000,32.000000) scale(0.100000,-0.100000)"
                  fill="none" stroke="none">
                  <path d="M95 306 c-101 -44 -125 -178 -46 -257 65 -65 157 -65 222 0 124 124
                  -15 327 -176 257z m133 -26 c39 -24 72 -75 72 -113 0 -15 -7 -44 -16 -65 -15
                  -34 -17 -35 -24 -15 -5 11 -19 29 -33 39 -21 17 -22 20 -10 45 27 55 -25 111
                  -82 89 -35 -13 -49 -54 -31 -91 13 -26 12 -29 -11 -44 -13 -9 -28 -26 -33 -38
                  -8 -21 -9 -20 -24 15 -21 50 -20 86 4 126 42 68 124 91 188 52z m-36 -47 c22
                  -20 23 -41 1 -65 -20 -22 -41 -23 -65 -1 -22 20 -23 41 -1 65 20 22 41 23 65
                  1z m29 -132 c16 -16 29 -34 29 -40 0 -16 -55 -41 -90 -41 -35 0 -90 25 -90 41
                  0 24 59 69 90 69 22 0 41 -9 61 -29z"
                  fill="currentColor"
                  fill-rule="evenodd"
                  clip-rule="evenodd"/>
                  </g>
                </svg>
                <a href="{{ url_for('account') }}">Account info</a>
              </div>
              </li>
              <div>
              <li class="sidebar-item">
                <svg 
                  version="1.0" 
                  xmlns="http://www.w3.org/2000/svg"
                  width="1.3em" 
                  height="1.3em" 
                  viewBox="0 0 32.000000 32.000000"
                  preserveAspectRatio="xMidYMid meet">
    
                  <g transform="translate(0.000000,32.000000) scale(0.100000,-0.100000)"
                  fill="none" stroke="none">
                  <path d="M17 302 c-14 -15 -17 -41 -17 -144 0 -156 1 -158 118 -158 76 0 83 2
                  98 25 16 25 16 59 -1 57 -5 0 -12 -11 -15 -24 -5 -21 -12 -23 -88 -26 l-82 -3
                  0 131 0 131 82 -3 c76 -3 83 -5 88 -26 3 -13 9 -24 15 -25 17 -3 17 33 1 58
                  -15 23 -22 25 -100 25 -68 0 -86 -3 -99 -18z"
                  fill="currentColor"
                  fill-rule="evenodd"
                  clip-rule="evenodd"/>
                  <path d="M260 202 c0 -4 5 -13 12 -20 9 -9 -5 -12 -65 -12 -45 0 -77 -4 -77
                  -10 0 -6 32 -10 75 -10 73 0 75 -1 65 -20 -16 -31 15 -26 36 5 15 23 15 27 0
                  50 -15 23 -46 35 -46 17z"
                  fill="currentColor"
                  fill-rule="evenodd"
                  clip-rule="evenodd"/>
                  </g>
                </svg>
                <a href="{{ url_for('logout') }}">Log out</a>
              </li>
            </div>
          </ul>
        </div>
      </nav>
    </aside>

    <div class="account-view">
      <div class="overview-container">
        <div class="overview-header-container">
          <p class="overview-container--header">
            Welcome back, {{ current_user.username }}
          </p>
          <p class="overview-container--header-subtext">
            Here is how your current trades are doing
          </p>
        </div>
        <div class="trade-container">
          {% if size == 0 %}
          <div class="open-trade">
            <p>You don't seem to have any avtive trades...</p>
          </div>
          {% else %} {% for ticker in data %}
          <div class="open-trade">
            <div class="ticker-info">
              <img
                src="{{ ticker['icon'] }}"
                alt="icon"
                width="30px"
                height="30px"
                class="ticker-icon"
              />
              <span class="ticker-name">{{ ticker["ticker"] }}</span>
            </div>
            <div class="trade-info">
              <div>
                <span class="trade-middle-small">Entries:</span>
                <span class="trade-middle--big">{{ ticker["entries"] }}</span>
              </div>
              <div>
                <span class="entries-middle--small">Value:</span>
                <span class="trade-middle--big"
                  >{{ ticker["total_value"] }}</span
                ><span class="trade-balance">$</span>
                <span class="trade-balance"
                  >({% if ticker["profit"] > 0 %}+{% endif %}{{ ticker["profit"]
                  }})</span
                >
              </div>
            </div>
            <form method="POST">
              {{ form.hidden_tag() }}
              <div>{{ form.delete(class="delete-ticker") }}</div>
              {{ form.ticker(value=ticker["ticker"], style="display: none") }}
            </form>
          </div>
          {% endfor %} {% endif %}
        </div>
      </div>

      <div class="trade-history">
        <div class="trade-history-header-container">
          <p class="overview-container--header-subtext">
            Here is your recent activity
          </p>
        </div>
        <div class="history-container">
          {% for log_entry in log %}

          <div class="past-trade">
            <p class="fade-date">
              {{ log_entry["date"]["date"] }}<br />{{ log_entry["date"]["time"]
              }}
            </p>
            <p class="trade-status">{{ log_entry["message"] }}</p>
          </div>

          {% endfor %}
        </div>
      </div>
    </div>
    <script src="{{ url_for('static', filename='scripts/overview.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/navbar.js') }}"></script>
  </body>
</html>
